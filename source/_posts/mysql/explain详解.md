---
title: explain详解
tag: mysql
---
## 一、简介：

**1.含义**

Explain可以模拟优化器执行SQL查询语句，从而知道MySQL是如何处理你的SQL语句的，分析所查询的语句或者表结构的性能瓶颈。

**2.作用**

能够获取以下信息：

- 表的读取顺序
- 哪些索引可以使用
- 数据读取操作的操作类型
- 哪些索引被实际使用
- 表之间的引用
- 每张表有多少行被物理查询
- **SQL语句性能分析**

**3.如何使用**

Explain+SQL语句

运行结果字段：

![img](.\media\v2-5d33487e208ea34c92370efcdcc55a1e_1440w.png)Explain包含字段

## 二、字段解释：

**1.id--执行顺序**

select查询的序列号,包含一组数字，表示查询中执行select子句或操作表的顺序。

★**注意**：id号每个号码，表示一趟独立的查询。**一个sql 的查询趟数越少越好。**

![img](.\media\v2-a061744a09bbf25b10035fc0e954c0e5_1440w.jpg)

**2.select_type--查询类型**

★**注意： DEPENDENT SUBQUERY**

- 会严重消耗性能
- 不会进行子查询，会先进行外部查询,生成结果集,再在内部进行关联查询
- 子查询的执行效率受制于外层查询的记录数
- 可以尝试改成join查询

![img](.\media\v2-a7035dd17f951bb6dc4b21f7d81d8137_1440w.jpg)

**3.table--正在访问哪个表**

**4.partitions--匹配的分区**

**5.type--访问类型**

结果值从最好到最坏依次是：

**system > const > eq_ref > ref** > fulltext > ref_or_null > index_merge > unique_subquery > index_subquery **> range > index > ALL**

★**注意：**一般来说，得保证查询**至少达到range级别，最好能达到ref**。

![img](.\media\v2-279f40b0b73278ea55719f86e5c31219_1440w.jpg)

**6.possible_keys--可能使用的索引**

显示可能应用在这张表中的索引，一个或多个。

查询涉及到的字段上若存在索引，则该索引将被列出，但不一定被查询实际使用。

**7.key--实际使用的索引**

实际使用的索引。如果为NULL，则没有使用索引；查询中若使用了覆盖索引，则该索引和查询的select字段重叠。

**8.key_len--索引中使用的字节数**

可通过该列计算查询中使用的索引的长度。 key_len字段能够帮你检查是否充分的利用上了索引。

如何计算？

1. 先看索引上字段的类型+长度比如 int=4 ; varchar(20) =20 ; char(20) =20
2. 如果是varchar或者char这种字符串字段，视字符集要乘不同的值，比如utf-8 要乘3，GBK要乘2
3. varchar这种动态字符串要加2个字节
4. 允许为空的字段要加1个字节

例子：

![img](.\media\v2-399c7a3c702585e52a2557244d8f1c1f_1440w.jpg)

**9.ref--显示索引中被使用的列**

显示索引的哪一列被使用了，如果可能的话，是一个常数。哪些列或常量被用于查找索引列上的值。

**10.rows--必须检查的行数**

**11.filtered--过滤比例**

表示存储引擎返回的数据**在server层过滤后，剩下多少满足查询的记录数量的比例**，注意是百分比，不是具体记录数

**12.Extra**

![img](.\media\v2-2bb309a8663a404785be5507832ec92f_1440w.jpg)